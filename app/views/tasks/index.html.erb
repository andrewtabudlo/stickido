<div id="myModal"></div>
<%= link_to "Create Main Task", new_project_task_path, remote: true, class: "btn btn-primary" %>

<div id="taskFrame">
<div id="taskFrameInnerWrap">
  <% @tasks.each do |task|%>
    <div class="<%= task.duedate %> listFrameContainer">
      <div class="individualTaskWrapLevelOne">

        <p> Get <%=task.name%> done</p>
            <%= link_to 'Edit', edit_project_task_path(params[:project_id], task), class: "card-link btn btn-outline-primary", remote: true %>
        <%= link_to 'Delete', project_task_path(params[:project_id], task), method: :delete, class: "card-link btn btn-outline-danger", data: { confirm: "Are you sure you want to delete '#{task.name}'?" } %>
      </div>
      <ol class="listFrame">
        <%@parent_id_one = task.id%>
        <%@subtasks_one = Task.where(task_id: @parent_id_one)%>
        <%if @subtasks_one != nil%>
          <%@subtasks_one.each do |task|%>
            <li>
              <div class="individualTaskWrapLevelTwo">
        					<p> List Name:  <%=task.name%></p>
                     <p>List content:  <%=task.content%></p>
                     <p>List sequence:  <%=task.sequence%></p>
                     <p>List due:  <%=task.duedate%></p>
                     <p>List id:  <%=task.id%></p>
        <%= link_to 'Edit', edit_project_task_path(params[:project_id], task), class: "card-link btn btn-outline-primary", remote: true %>
        <%= link_to 'Delete', project_task_path(params[:project_id], task), method: :delete, class: "card-link btn btn-outline-danger", data: { confirm: "Are you sure you want to delete '#{task.name}'?" } %>
              </div>
              <ol>
                <%@parent_id_two = task.id%>
                <%@subtasks_two = Task.where(task_id: @parent_id_two)%>
                <%if @subtasks_two != nil%>
                <%@subtasks_two.each do |task|%>
                  <li>
                    <div class="individualTaskWrapLevelThree">
          							<p> List Name:  <%=task.name%></p>
                            <p>List content:  <%=task.content%></p>
                            <p>List sequence:  <%=task.sequence%></p>
                            <p>List due:  <%=task.duedate%></p>
                            <p>List id:  <%=task.id%></p>
        <%= link_to 'Edit', edit_project_task_path(params[:project_id], task), class: "card-link btn btn-outline-primary", remote: true %>
        <%= link_to 'Delete', project_task_path(params[:project_id], task), method: :delete, class: "card-link btn btn-outline-danger", data: { confirm: "Are you sure you want to delete '#{task.name}'?" } %>
                    </div>
                    <ol>
                      <%@parent_id_three = task.id%>
                      <%@subtasks_three = Task.where(task_id: @parent_id_three)%>
                      <%if @subtasks_three != nil%>
                        <%@subtasks_three.each do |task|%>
                          <li>
                            <div class="individualTaskWrapLevelFour">
                  							<p> List Name:  <%=task.name%></p>
                                    <p>List content:  <%=task.content%></p>
                                    <p>List sequence:  <%=task.sequence%></p>
                                    <p>List due:  <%=task.duedate%></p>
                                    <p>List id:  <%=task.id%></p>
         <%= link_to 'Edit', edit_project_task_path(params[:project_id], task), class: "card-link btn btn-outline-primary", remote: true %>
        <%= link_to 'Delete', project_task_path(params[:project_id], task), method: :delete, class: "card-link btn btn-outline-danger", data: { confirm: "Are you sure you want to delete '#{task.name}'?" } %>
                            </div>
                          </li>
                        <%end%>
                      <%end%>
                    </ol>
                  </li>
                <%end%>
              </ol>
              <%end%>
            </li>
          <%end%>
        <%end%>
      </ol>
    </div>
  <% end %>
</div>
</div>

<div id="timeline-frame">
  <div class="scrollbar">
  	<div class="handle"></div>
  </div>
   <div class="frame">
    	<ul class="slidee">
        <% @duedates.each do |d| %>
        <li class="timelinesection border" id="<%= d.duedate %>"><%= d.duedate %></li>
        <script>
          $(`#<%= d.duedate %>`).click(function(){
            let target = '<%= d.duedate %>';
            $(`.${target}`).siblings().toggle();
          });
        </script>
        <% end %>
    	</ul>
  </div>
</div>
<script>
console.log('script tag in views/tasks/index linked');

var slyelement = {
  obj: {},
  el: '.frame',
  options: {
    horizontal: 1,
    itemNav: 'forceCentered',
    smart: 1,
    activateMiddle: 1,
    activateOn: 'click',
    mouseDragging: 1,
    touchDragging: 1,
    releaseSwing: 1,
    startAt: 0,
    scrollBy: 1,
    speed: 300,
    elasticBounds: 1,
    easing: 'swing', // easeInOutElastic, easeOutBounce
    scrollBar: $('.scrollbar')
  }
};

$(function(){
  slyelement.obj = new Sly($(slyelement.el), slyelement.options);

  slyelement.obj.init();
});

$(window).resize(function(e) {
  slyelement.obj.reload();
});
</script>
